---
title: 数组方法
description: 数组处理相关的工具函数
---

import DemoPanel from '@components/DemoPanel/DemoPanel.astro';
import ArrayHelpersDemo from '@components/DemoPanel/ArrayHelpersDemo.vue';

[查看源码](https://gitlab.redtea.io/redteamobile/ngiot-frontend-cpt/-/blob/dev/src/utils/helper/array.ts)

<DemoPanel title="数组方法交互式演示">
  <div slot="content">

# 数组方法

提供丰富的数组处理工具函数，包括去重、树形化、分组、排序、统计等功能。

## 导入方式

```typescript
import { jqTool } from 'qcpt'

// 使用数组方法
jqTool.helper.array.uniqueArray([1, 2, 2, 3])
```

## 数组去重

### uniqueArray

基础类型数组去重：

```typescript
jqTool.helper.array.uniqueArray([1, 2, 2, 3, 3, 4])
// [1, 2, 3, 4]

jqTool.helper.array.uniqueArray(['a', 'b', 'a', 'c'])
// ['a', 'b', 'c']
```

### uniqueArrayByKey

对象数组根据指定字段去重：

```typescript
const arr = [
  { id: 1, name: 'a' },
  { id: 2, name: 'b' },
  { id: 1, name: 'c' }
]
jqTool.helper.array.uniqueArrayByKey(arr, 'id')
// [{ id: 1, name: 'a' }, { id: 2, name: 'b' }]
```

### uniqueArrayByKeys

对象数组根据多个字段去重：

```typescript
const arr = [
  { a: 1, b: 2 },
  { a: 1, b: 3 },
  { a: 1, b: 2 }
]
jqTool.helper.array.uniqueArrayByKeys(arr, ['a', 'b'])
// [{ a: 1, b: 2 }, { a: 1, b: 3 }]
```

## 数组树形化

### arrayToTree

扁平数组转树形结构：

```typescript
const list = [
  { id: 1, parentId: null, name: 'A' },
  { id: 2, parentId: 1, name: 'A-1' },
  { id: 3, parentId: 1, name: 'A-2' }
]

const tree = jqTool.helper.array.arrayToTree(list)
// [
//   {
//     id: 1, parentId: null, name: 'A',
//     children: [
//       { id: 2, parentId: 1, name: 'A-1', children: [] },
//       { id: 3, parentId: 1, name: 'A-2', children: [] }
//     ]
//   }
// ]
```

### treeToArray

树形结构转扁平数组：

```typescript
const tree = [
  {
    id: 1, name: 'A',
    children: [
      { id: 2, name: 'A-1' },
      { id: 3, name: 'A-2' }
    ]
  }
]

const list = jqTool.helper.array.treeToArray(tree)
// [{ id: 1, name: 'A' }, { id: 2, name: 'A-1' }, { id: 3, name: 'A-2' }]
```

### findNodeInTree

在树中查找节点：

```typescript
const tree = [{ id: 1, children: [{ id: 2 }] }]
const node = jqTool.helper.array.findNodeInTree(tree, node => node.id === 2)
// { id: 2 }
```

### forEachTree

遍历树的所有节点：

```typescript
jqTool.helper.array.forEachTree(tree, (node, parent, level) => {
  console.log(`Level ${level}:`, node.name)
})
```

## 数组分组

### groupBy

根据指定字段分组：

```typescript
const arr = [
  { type: 'fruit', name: 'apple' },
  { type: 'fruit', name: 'banana' },
  { type: 'vegetable', name: 'carrot' }
]

const grouped = jqTool.helper.array.groupBy(arr, 'type')
// {
//   fruit: [{ type: 'fruit', name: 'apple' }, { type: 'fruit', name: 'banana' }],
//   vegetable: [{ type: 'vegetable', name: 'carrot' }]
// }
```

### groupByFn

根据函数分组：

```typescript
const arr = [1, 2, 3, 4, 5]
const grouped = jqTool.helper.array.groupByFn(
  arr,
  num => num % 2 === 0 ? 'even' : 'odd'
)
// { odd: [1, 3, 5], even: [2, 4] }
```

## 数组排序

### sortBy

根据单个字段排序：

```typescript
const arr = [
  { age: 30 },
  { age: 20 },
  { age: 25 }
]
const sorted = jqTool.helper.array.sortBy(arr, 'age', 'asc')
// [{ age: 20 }, { age: 25 }, { age: 30 }]
```

### sortByMultiple

根据多个字段排序：

```typescript
const arr = [
  { age: 30, name: 'Bob' },
  { age: 20, name: 'Alice' },
  { age: 30, name: 'Alice' }
]

const sorted = jqTool.helper.array.sortByMultiple(arr, [
  { key: 'age', order: 'asc' },
  { key: 'name', order: 'asc' }
])
// [
//   { age: 20, name: 'Alice' },
//   { age: 30, name: 'Alice' },
//   { age: 30, name: 'Bob' }
// ]
```

## 数组统计

### sum

数组求和：

```typescript
jqTool.helper.array.sum([1, 2, 3, 4, 5]) // 15

const arr = [{ price: 10 }, { price: 20 }]
jqTool.helper.array.sum(arr, 'price') // 30
```

### average

求平均值：

```typescript
jqTool.helper.array.average([1, 2, 3, 4, 5]) // 3

const arr = [{ age: 20 }, { age: 30 }]
jqTool.helper.array.average(arr, 'age') // 25
```

### max / min

求最大值和最小值：

```typescript
jqTool.helper.array.max([1, 2, 3, 4, 5]) // 5
jqTool.helper.array.min([1, 2, 3, 4, 5]) // 1
```

## 数组操作

### chunkArray

数组分块：

```typescript
jqTool.helper.array.chunkArray([1, 2, 3, 4, 5], 2)
// [[1, 2], [3, 4], [5]]
```

### intersection / union / difference

交集、并集、差集：

```typescript
jqTool.helper.array.intersection([1, 2, 3], [2, 3, 4]) // [2, 3]
jqTool.helper.array.union([1, 2, 3], [2, 3, 4]) // [1, 2, 3, 4]
jqTool.helper.array.difference([1, 2, 3], [2, 3, 4]) // [1]
```

### shuffle

数组打乱：

```typescript
jqTool.helper.array.shuffle([1, 2, 3, 4, 5])
// [3, 1, 5, 2, 4] (随机顺序)
```

### sample

随机抽取：

```typescript
jqTool.helper.array.sample([1, 2, 3, 4, 5], 3)
// [2, 4, 1] (随机抽取3个)
```

### flatten

扁平化数组：

```typescript
jqTool.helper.array.flatten([1, [2, [3, [4]]]])
// [1, 2, 3, 4]

jqTool.helper.array.flatten([1, [2, [3, [4]]]], 2)
// [1, 2, 3, [4]]
```

### paginate

数组分页：

```typescript
const result = jqTool.helper.array.paginate([1, 2, 3, 4, 5], 1, 2)
// {
//   data: [1, 2],
//   page: 1,
//   pageSize: 2,
//   total: 5,
//   totalPages: 3
// }
```

### move

移动数组元素：

```typescript
jqTool.helper.array.move(['a', 'b', 'c', 'd'], 0, 2)
// ['b', 'c', 'a', 'd']
```

### countBy

统计每个元素出现次数：

```typescript
jqTool.helper.array.countBy(['a', 'b', 'a', 'c', 'a', 'b'])
// { a: 3, b: 2, c: 1 }
```

  </div>
  <ArrayHelpersDemo slot="demo" client:only="vue" />
</DemoPanel>
