---
title: 样式系统
description: QCPT 的 CSS 样式系统架构和使用指南
---

import DemoPanel from '@components/DemoPanel/DemoPanel.astro';
import StylesDemo from '@components/DemoPanel/StylesDemo.vue';

[查看源码](https://gitlab.redtea.io/redteamobile/ngiot-frontend-cpt/-/tree/dev/src/css)

<DemoPanel title="样式系统可视化演示">
  <div slot="content">

# 样式系统

QCPT 的样式系统基于 SCSS，采用模块化设计，提供了完整的样式覆盖和工具类。

## 目录结构

```
src/css/
├── qcpt.scss                  # 主入口文件
└── lib/                        # 样式库目录
    ├── _vars-color.scss        # 颜色变量定义（自动生成）
    ├── _vars-box.scss          # 尺寸变量定义
    ├── _vars-decoration.scss   # 装饰变量定义
    ├── _reset.scss             # 浏览器样式重置
    ├── _font.scss              # 字体样式
    ├── _color.scss             # 颜色工具类
    ├── _box.scss               # 尺寸工具类（原子类）
    ├── _decoration.scss        # 装饰工具类
    ├── _utils.scss             # 通用工具类
    ├── _q-common.scss          # Quasar 通用组件样式
    ├── _q-card.scss            # Quasar Card 样式
    ├── _q-dialog.scss          # Quasar Dialog 样式
    ├── _q-input.scss           # Quasar Input 样式
    ├── _q-select.scss          # Quasar Select 样式
    ├── _q-date.scss            # Quasar Date 样式
    ├── _q-tree-select.scss     # Quasar TreeSelect 样式
    ├── _q-btn.scss             # Quasar Button 样式
    ├── _q-menu.scss            # Quasar Menu 样式
    ├── _q-message.scss         # Quasar Message 样式
    └── _quasar-use-comment.scss # Quasar 使用注释
```

## 样式加载顺序

`qcpt.scss` 按照以下顺序加载样式文件，确保依赖关系正确：

### 1. 变量和配置（最先导入）

```scss
@use './lib/vars-color';  // 颜色变量
@use './lib/color';       // 颜色工具
```

### 2. 基础重置和字体

```scss
@use './lib/reset';  // 浏览器样式重置
@use './lib/font';   // 字体样式
```

### 3. Quasar 组件样式覆盖

按组件功能分组，从基础到复杂：

```scss
// 基础通用组件
@use './lib/q-common';

// 布局容器组件
@use './lib/q-card';
@use './lib/q-dialog';

// 表单输入组件
@use './lib/q-input';
@use './lib/q-select';
@use './lib/q-date';
@use './lib/q-tree-select';

// 交互组件
@use './lib/q-btn';
@use './lib/q-menu';
@use './lib/q-message';
```

### 4. 自定义工具和装饰类（最后导入）

```scss
@use './lib/box';        // 尺寸工具类
@use './lib/decoration'; // 装饰工具类
@use './lib/utils';      // 通用工具类
```

## 核心模块说明

### 变量系统

#### 颜色变量 (`_vars-color.scss`)

颜色变量由 `generate-colors.js` 自动生成，基于 `src/config/colors.json`。

**主要颜色：**
- `$primary` / `$blue`: `#0B5CFF` - 主色调
- `$dark`: `#323232` - 深色
- `$green`: `#2da641` - 绿色
- `$red` / `$negative`: `#E93030` - 红色/错误色
- `$yellow`: `#f2c037` - 黄色/警告色
- `$grey`: `#969799` - 灰色
- `$white`: `#ffffff` - 白色

**浅色变体：**
- `$blue-light`: `#f0f4ff` - 蓝色浅色
- `$green-light`: `#c0e4c6` - 绿色浅色
- `$red-light`: `#fff0f0` - 红色浅色
- `$yellow-light`: `#fff9e9` - 黄色浅色
- `$grey-light`: `#eeeeee` - 灰色浅色
- `$grey-lighter`: `#f5f6fa` - 灰色更浅

**深色变体：**
- `$dark-strong`: `#131523` - 深色加强
- `$dark-lighter`: `#f7f7f7` - 深色浅色变体

**灰色变体：**
- `$grey-strong`: `#969799` - 灰色加强
- `$grey-medium`: `#aaaaaa` - 灰色中等

**使用方式：**

```scss
// 在 SCSS 中使用
.my-component {
  color: $primary;
  background: $grey-light;
}

// 在 CSS 中使用 CSS 变量
.my-component {
  color: var(--j-color-primary);
  background: var(--j-color-grey-light);
}
```

#### 尺寸变量 (`_vars-box.scss`)

定义了常用的尺寸值：

```scss
$box-sizes: (
  10: 10px,
  20: 20px,
  30: 30px,
  40: 40px,
  50: 50px,
  60: 60px,
  100: 100px,
  150: 150px,
  200: 200px,
  '25p': 25%,
  '33p': 33.333333%,
  '50p': 50%,
  '66p': 66.666667%,
  '75p': 75%,
  '100p': 100%
);

$font-sizes: (
  10: 10px,
  12: 12px,
  14: 14px,
  16: 16px,
  18: 18px,
  20: 20px,
  24: 24px,
  28: 28px,
  32: 32px,
  36: 36px,
  40: 40px,
  48: 48px,
  52: 52px,
  56: 56px,
  64: 64px,
  72: 72px,
  80: 80px
);

$max-sizes: (
  '100p': 100%,
  '500': 500px,
  '800': 800px
);

$min-sizes: (
  '0': 0,
  '100': 100px
);
```

### 工具类系统

#### 尺寸工具类 (`_box.scss`)

基于变量自动生成的原子类：

**宽度和高度：**
```html
<div class="w-100 h-50">宽度 100px，高度 50px</div>
<div class="w-50p h-100p">宽度 50%，高度 100%</div>
```

**最大宽度：**
```html
<div class="max-w-800">最大宽度 800px</div>
<div class="max-w-100p">最大宽度 100%</div>
```

**最小高度：**
```html
<section class="min-h-100">最小高度 100px</section>
```

#### 通用工具类 (`_utils.scss`)

**隐藏元素：**
```html
<div class="hide">隐藏的内容</div>
```

**文本省略号：**
```html
<div class="ellipsis">超长文本会自动显示省略号</div>
```

**链接样式：**
```html
<a class="link-type">主要链接（主题色）</a>
<a class="delete-type">删除链接（危险色）</a>
```

**表格内按钮：**
```html
<button class="in-table-link-button">表格内普通按钮</button>
<button class="in-table-delete-button">表格内删除按钮</button>
```

**密码输入框：**
```html
<input class="input-password" type="password" />
```

### Quasar 组件样式覆盖

#### Input 组件 (`_q-input.scss`)

提供了统一的输入框样式重置和两种模式：

**表格模式 (`j-q-input--table`)：**
- 高度：36px
- 适用于表格内输入

**表单模式 (`j-q-input--form`)：**
- 高度：40px
- 适用于表单输入

**使用方式：**
```vue
<!-- 表格模式 -->
<j-q-input v-model="value" label="标签" />

<!-- 表单模式（无 label） -->
<j-q-input v-model="value" />
```

#### Dialog 组件 (`_q-dialog.scss`)

使用 CSS 变量统一管理对话框样式：

```scss
:root {
  --q-dialog-inner-padding: 16px;
  --q-dialog-border-radius: 4px;
  --q-dialog-backdrop: rgba(0, 0, 0, 0.5);
  --q-dialog-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
}
```

**右侧面板样式：**
```vue
<j-q-dialog position="right">
  <!-- 右侧面板内容 -->
</j-q-dialog>
```

### 样式重置 (`_reset.scss`)

重置浏览器默认样式，建立统一的样式基线。

## 自定义样式

### 修改颜色主题

1. 修改 `src/config/colors.json`
2. 运行 `npm run build:colors` 重新生成颜色变量

### 添加新的工具类

在对应的工具类文件中添加：

```scss
// 在 _utils.scss 中添加
.my-custom-class {
  // 你的样式
}
```

### 覆盖组件样式

使用深度选择器覆盖组件内部样式：

```vue
<style scoped>
:deep(.j-q-input) {
  /* 自定义输入框样式 */
}
</style>
```

## CSS 变量

QCPT 提供了完整的 CSS 变量系统，所有颜色都可以通过 CSS 变量访问：

```css
:root {
  /* 主要颜色 */
  --j-color-primary: #0B5CFF;
  --j-color-blue: #0B5CFF;
  --j-color-dark: #323232;
  --j-color-green: #2da641;
  --j-color-red: #E93030;
  --j-color-negative: #E93030;
  --j-color-yellow: #f2c037;
  --j-color-grey: #969799;
  --j-color-white: #ffffff;
  
  /* 浅色变体 */
  --j-color-blue-light: #f0f4ff;
  --j-color-green-light: #c0e4c6;
  --j-color-red-light: #fff0f0;
  --j-color-yellow-light: #fff9e9;
  --j-color-grey-light: #eeeeee;
  --j-color-grey-lighter: #f5f6fa;
  
  /* 深色变体 */
  --j-color-dark-strong: #131523;
  --j-color-dark-lighter: #f7f7f7;
  
  /* 灰色变体 */
  --j-color-grey-strong: #969799;
  --j-color-grey-medium: #aaaaaa;
}
```

**使用示例：**

```vue
<template>
  <div class="custom-card">
    <h3>标题</h3>
    <p>内容</p>
  </div>
</template>

<style scoped>
.custom-card {
  background: var(--j-color-grey-lighter);
  border: 1px solid var(--j-color-grey-light);
  color: var(--j-color-dark);
}

.custom-card h3 {
  color: var(--j-color-primary);
}

.custom-card p {
  color: var(--j-color-grey);
}
</style>
```

## 最佳实践

1. **优先使用工具类**：使用预定义的原子类，减少自定义样式
2. **使用 CSS 变量**：通过 CSS 变量访问颜色，便于主题切换
3. **遵循加载顺序**：自定义样式应在组件样式之后加载
4. **避免硬编码**：使用变量而非硬编码的值
5. **使用深度选择器**：覆盖组件样式时使用 `:deep()` 选择器

## 注意事项

- 颜色变量文件 (`_vars-color.scss`) 由脚本自动生成，请勿手动修改
- 修改颜色配置后需要运行 `npm run build:colors` 重新生成
- 样式文件使用 SCSS 的 `@use` 语法，确保依赖关系正确
- 工具类按需使用，避免过度使用原子类导致 HTML 臃肿

</div>
<StylesDemo slot="demo" client:only="vue" />
</DemoPanel>

