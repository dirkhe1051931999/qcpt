---
title: JCFallback 值回退显示
description: 根据值是否存在显示内容或默认占位符的组件
---

[查看源码](https://github.com/dirkhe1051931999/qcpt/blob/dev/src/components/j-c-fallback)

import DemoPanel from '@components/DemoPanel/DemoPanel.astro';
import JCFallbackDemo from '@components/DemoPanel/JCFallbackDemo.vue';

# JCFallback 值回退显示

根据值是否存在显示内容或默认占位符的组件，用于处理空值显示。

## 基础用法

```vue
<template>
  <j-c-fallback :value="userName">
    {{ userName }}
  </j-c-fallback>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { JCFallback } from 'qcpt'

const userName = ref('张三')
// 如果 userName 为空，会显示默认的 '-'
</script>
```

## 自定义默认内容

使用 `defaultContent` 属性自定义无值时显示的内容：

```vue
<template>
  <j-c-fallback :value="email" default-content="暂无邮箱">
    {{ email }}
  </j-c-fallback>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { JCFallback } from 'qcpt'

const email = ref('')
</script>
```

## 完全隐藏

使用 `rmDom` 属性在无值时完全隐藏元素（不渲染 DOM）：

```vue
<template>
  <j-c-fallback :value="description" :rm-dom="true">
    <div>{{ description }}</div>
  </j-c-fallback>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { JCFallback } from 'qcpt'

const description = ref('')
</script>
```

## 零值处理

默认情况下，`0` 和 `'0'` 被视为有效值。可以通过 `zeroIsValid` 控制：

```vue
<template>
  <!-- 默认：0 被视为有效值 -->
  <j-c-fallback :value="count">
    {{ count }}
  </j-c-fallback>

  <!-- 0 被视为无效值，显示默认内容 -->
  <j-c-fallback :value="count" :zero-is-valid="false">
    {{ count }}
  </j-c-fallback>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { JCFallback } from 'qcpt'

const count = ref(0)
</script>
```

## 布尔值 false 处理

默认情况下，`false` 被视为有效值。可以通过 `falseIsValid` 控制：

```vue
<template>
  <!-- 默认：false 被视为有效值 -->
  <j-c-fallback :value="isActive">
    {{ isActive ? '启用' : '禁用' }}
  </j-c-fallback>

  <!-- false 被视为无效值，显示默认内容 -->
  <j-c-fallback :value="isActive" :false-is-valid="false">
    {{ isActive ? '启用' : '禁用' }}
  </j-c-fallback>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { JCFallback } from 'qcpt'

const isActive = ref(false)
</script>
```

## API

### Props

| 属性名 | 类型 | 默认值 | 描述 |
| --- | --- | --- | --- |
| `value` | `any` | `null` | 需要判断是否存在的值 |
| `defaultContent` | `string` | `'-'` | 无值时显示的默认内容 |
| `rmDom` | `boolean` | `false` | 是否在无值时彻底隐藏组件（不渲染 DOM） |
| `zeroIsValid` | `boolean` | `true` | 是否把 0 或 '0' 视为有效值 |
| `falseIsValid` | `boolean` | `true` | 是否把 false 视为有效值 |

### Slots

| 插槽名 | 描述 |
| --- | --- |
| `default` | 有值时显示的内容 |

## 值判断逻辑

组件按以下逻辑判断值是否有效：

1. 如果 `zeroIsValid` 为 `true`（默认），`0` 或 `'0'` 视为有效值
2. 如果 `falseIsValid` 为 `true`（默认），`false` 视为有效值
3. 其他 falsy 值（`null`、`undefined`、`''` 等）视为无效值
4. 空数组 `[]` 和空对象 `{}` 视为有效值（Truthy）

<DemoPanel>
<div slot="content">

## 示例

</div>
<JCFallbackDemo slot="demo" client:only="vue" />
</DemoPanel>

## 注意事项

- 默认情况下，`0` 和 `'0'` 被视为有效值，可通过 `zeroIsValid` 控制
- 默认情况下，`false` 被视为有效值，可通过 `falseIsValid` 控制
- 使用 `rmDom` 属性可以在无值时完全隐藏元素（不渲染 DOM）

