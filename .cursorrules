# é¡¹ç›®å¼€å‘è§„åˆ™

## Vue ç»„ä»¶å¼€å‘è§„èŒƒ

### 1. ç»„ä»¶å®šä¹‰é£æ ¼
æ‰€æœ‰ Vue ç»„ä»¶å¿…é¡»ä½¿ç”¨ Options API é£æ ¼ï¼Œä½¿ç”¨ `export default defineComponent({` å®šä¹‰ç»„ä»¶ã€‚

**âœ… æ­£ç¡®çš„å†™æ³•ï¼š**
```vue
<script lang="ts">
import { defineComponent } from 'vue';

export default defineComponent({
  name: 'MyComponent',
  props: {
    // ...
  },
  setup(props, { emit }) {
    // ...
    return {
      // ...
    };
  },
});
</script>
```

**âŒ é”™è¯¯çš„å†™æ³•ï¼š**
```vue
<!-- ä¸è¦ä½¿ç”¨ <script setup> -->
<script setup lang="ts">
const props = defineProps({...});
</script>
```

### 2. æ–‡æ¡£ç”Ÿæˆè§„åˆ™
**ä¸è¦è‡ªåŠ¨ç”Ÿæˆ README.md æˆ–å…¶ä»–æ–‡æ¡£æ–‡ä»¶ã€‚**

é™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼Œå¦åˆ™ï¼š
- âŒ ä¸è¦ç”Ÿæˆ README.md æ–‡ä»¶
- âŒ ä¸è¦ç”Ÿæˆ CHANGELOG.md æ–‡ä»¶
- âŒ ä¸è¦ç”Ÿæˆä»»ä½•è¯´æ˜æ–‡æ¡£
- âœ… åªç”Ÿæˆä»£ç æ–‡ä»¶ï¼ˆ.vue, .ts, .js, .scss ç­‰ï¼‰

### 3. æ–°å»ºç»„ä»¶è§„åˆ™

#### 3.1 ä¸è¦è‡ªåŠ¨ç”Ÿæˆæ¼”ç¤ºæ–‡ä»¶
**æ–°å»ºç»„ä»¶æ—¶ï¼Œä¸è¦è‡ªåŠ¨åˆ›å»º `demo.vue` å’Œ `example.ts` æ–‡ä»¶ã€‚**

é™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼Œå¦åˆ™ï¼š
- âŒ ä¸è¦ç”Ÿæˆ demo.vue æ–‡ä»¶
- âŒ ä¸è¦ç”Ÿæˆ example.ts æ–‡ä»¶
- âœ… åªç”Ÿæˆæ ¸å¿ƒç»„ä»¶æ–‡ä»¶ï¼ˆindex.vueã€index.tsã€types.ts ç­‰ï¼‰

#### 3.2 ç»„ä»¶å¯¼å‡ºè§„åˆ™
**æ–°å»ºç»„ä»¶æ—¶ï¼Œå¿…é¡»åœ¨ `src/index.ts` ä¸­å¯¼å‡ºç»„ä»¶ã€‚**

æ­¥éª¤ï¼š
1. åœ¨æ–‡ä»¶é¡¶éƒ¨çš„å¯¼å…¥åŒºåŸŸæ·»åŠ  import è¯­å¥
2. åœ¨æ–‡ä»¶åº•éƒ¨çš„ export è¯­å¥ä¸­æ·»åŠ ç»„ä»¶åç§°

**âœ… æ­£ç¡®çš„åšæ³•ï¼š**

åœ¨ `src/index.ts` æ–‡ä»¶é¡¶éƒ¨æ·»åŠ å¯¼å…¥ï¼š
```typescript
// j-q series (Quasar)
import JQAutocomplete from './components/j-q-autocomplete/index.vue';
import JQNewComponent from './components/j-q-new-component/index.vue'; // æ–°å¢
```

åœ¨ `src/index.ts` æ–‡ä»¶åº•éƒ¨çš„ export å—ä¸­æ·»åŠ å¯¼å‡ºï¼š
```typescript
export {
  // j-q series
  JQAutocomplete,
  JQNewComponent, // æ–°å¢
  // ... å…¶ä»–ç»„ä»¶
};
```

**æ³¨æ„äº‹é¡¹ï¼š**
- ä¿æŒç»„ä»¶æŒ‰ç³»åˆ—åˆ†ç»„ï¼ˆj-cã€j-qã€j-ch ç­‰ï¼‰
- ç»„ä»¶åç§°æŒ‰å­—æ¯é¡ºåºæ’åˆ—
- ç¡®ä¿ import è·¯å¾„æŒ‡å‘ç»„ä»¶çš„ `index.vue` æˆ– `index.ts` æ–‡ä»¶

### 4. CSS æ ·å¼å¼€å‘è§„åˆ™

#### ğŸš¨ å¼ºåˆ¶è§„åˆ™ï¼šç¦æ­¢ä½¿ç”¨ @import å’Œ SCSS å˜é‡

**æ‰€æœ‰ç»„ä»¶çš„ SCSS æ–‡ä»¶å¿…é¡»ä½¿ç”¨ CSS å˜é‡ï¼ˆvar(--xxx)ï¼‰ï¼Œä¸¥ç¦ä½¿ç”¨ @import æˆ– SCSS å˜é‡ï¼**

**è¿™æ˜¯å¼ºåˆ¶æ€§è§„åˆ™ï¼Œæ²¡æœ‰ä»»ä½•ä¾‹å¤–ï¼**

æ­¥éª¤ï¼š
1. åœ¨ç¼–å†™æˆ–ä¿®æ”¹æ ·å¼ä¹‹å‰ï¼Œå…ˆæŸ¥çœ‹ `src/css/lib` ç›®å½•ä¸‹çš„ç°æœ‰æ ·å¼æ–‡ä»¶
2. **å¿…é¡»ä½¿ç”¨ CSS å˜é‡ `var(--j-color-xxx)` æ ¼å¼**
3. **ä¸¥ç¦ä½¿ç”¨ `@import` æˆ– `@use` å¯¼å…¥ SCSS å˜é‡æ–‡ä»¶**
4. **ä¸¥ç¦ä½¿ç”¨ SCSS å˜é‡å¦‚ `$primary`ã€`$white` ç­‰**
5. ä¿æŒæ ·å¼é£æ ¼ä¸ç°æœ‰ä»£ç ä¸€è‡´

**å¯ç”¨çš„æ ·å¼æ–‡ä»¶ï¼ˆä»…ä¾›æŸ¥é˜…å˜é‡åç§°ï¼Œä¸è¦å¯¼å…¥ï¼‰ï¼š**
- `_vars-color.scss` - é¢œè‰²å˜é‡
- `_vars-box.scss` - ç›’æ¨¡å‹å˜é‡
- `_vars-decoration.scss` - è£…é¥°å˜é‡
- `_color.scss` - é¢œè‰²ç›¸å…³æ ·å¼
- `_box.scss` - ç›’æ¨¡å‹ç›¸å…³æ ·å¼
- `_font.scss` - å­—ä½“ç›¸å…³æ ·å¼
- `_decoration.scss` - è£…é¥°ç›¸å…³æ ·å¼
- `_utils.scss` - å·¥å…·ç±»æ ·å¼
- `_q-*.scss` - Quasar ç»„ä»¶æ ·å¼è¦†ç›–

**CSS å˜é‡å‘½åè§„åˆ™ï¼š**
- SCSS å˜é‡ `$white` å¯¹åº” CSS å˜é‡ `var(--j-color-white)`
- SCSS å˜é‡ `$black` å¯¹åº” CSS å˜é‡ `var(--j-color-black)`
- SCSS å˜é‡ `$primary` å¯¹åº” CSS å˜é‡ `var(--j-color-primary)`
- SCSS å˜é‡ `$blue` å¯¹åº” CSS å˜é‡ `var(--j-color-blue)`
- SCSS å˜é‡ `$dark` å¯¹åº” CSS å˜é‡ `var(--j-color-dark)`
- SCSS å˜é‡ `$green` å¯¹åº” CSS å˜é‡ `var(--j-color-green)`
- SCSS å˜é‡ `$red` å¯¹åº” CSS å˜é‡ `var(--j-color-red)`
- SCSS å˜é‡ `$yellow` å¯¹åº” CSS å˜é‡ `var(--j-color-yellow)`
- SCSS å˜é‡ `$grey` å¯¹åº” CSS å˜é‡ `var(--j-color-grey)`
- SCSS å˜é‡ `$grey-light` å¯¹åº” CSS å˜é‡ `var(--j-color-grey-light)`
- SCSS å˜é‡ `$grey-lighter` å¯¹åº” CSS å˜é‡ `var(--j-color-grey-lighter)`
- SCSS å˜é‡ `$dark-strong` å¯¹åº” CSS å˜é‡ `var(--j-color-dark-strong)`
- å…¶ä»–é¢œè‰²å˜é‡ä»¥æ­¤ç±»æ¨

**âœ… æ­£ç¡®çš„åšæ³•ï¼š**
```vue
<style lang="scss" scoped>
// âœ… æ­£ç¡®ï¼šç›´æ¥ä½¿ç”¨ CSS å˜é‡ï¼Œæ–‡ä»¶å¼€å¤´ä¸éœ€è¦ä»»ä½• @import
.my-component {
  color: var(--j-color-primary);
  background-color: var(--j-color-white);
  border: 1px solid var(--j-color-grey-light);
}
</style>
```

**âŒ é”™è¯¯çš„å†™æ³•ï¼š**
```vue
<style lang="scss" scoped>
// âŒ é”™è¯¯ï¼šä¸è¦ä½¿ç”¨ @import
@import '@/css/lib/vars-color';
@import '@/css/lib/vars-box';
@import '@/css/lib/vars-decoration';

// âŒ é”™è¯¯ï¼šä¸è¦ä½¿ç”¨ @use
@use '@/css/lib/vars-color';

// âŒ é”™è¯¯ï¼šä¸è¦ä½¿ç”¨ SCSS å˜é‡
.my-component {
  color: $primary-color;
  background-color: $white;
}
</style>
```

**ğŸ” æ£€æŸ¥ç°æœ‰ç»„ä»¶ç¤ºä¾‹ï¼š**
å‚è€ƒ `src/components/j-c-table/index.scss` çš„æ­£ç¡®å†™æ³•ï¼š
```scss
// æ–‡ä»¶å¼€å¤´æ²¡æœ‰ä»»ä½• @import
.j-c-table {
  background: var(--j-color-white);  // âœ… ä½¿ç”¨ CSS å˜é‡
  
  &__header {
    background: var(--j-color-grey-lighter);  // âœ… ä½¿ç”¨ CSS å˜é‡
  }
}
```

### 5. ä»£ç æ³¨é‡Šè§„åˆ™
**ç¼–å†™ä»£ç æ³¨é‡Šæ—¶ï¼Œå¿…é¡»ä¼˜å…ˆéµå¾ªå½“å‰æ–‡ä»¶ç°æœ‰çš„æ³¨é‡Šé£æ ¼ã€‚**

æ­¥éª¤ï¼š
1. åœ¨æ·»åŠ æˆ–ä¿®æ”¹æ³¨é‡Šä¹‹å‰ï¼Œå…ˆæŸ¥çœ‹å½“å‰æ–‡ä»¶ä¸­å·²æœ‰çš„æ³¨é‡Šé£æ ¼
2. ä¿æŒæ³¨é‡Šæ ¼å¼ã€è¯­è¨€ï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰ã€ç¼©è¿›ç­‰ä¸ç°æœ‰æ³¨é‡Šä¸€è‡´
3. å¦‚æœæ–‡ä»¶ä¸­æ²¡æœ‰ç°æœ‰æ³¨é‡Šï¼Œåˆ™å‚è€ƒåŒç±»å‹æ–‡ä»¶çš„æ³¨é‡Šé£æ ¼

**æ³¨é‡Šé£æ ¼åŒ…æ‹¬ä½†ä¸é™äºï¼š**
- æ³¨é‡Šç¬¦å·æ ·å¼ï¼ˆ`//` æˆ– `/* */`ï¼‰
- æ³¨é‡Šè¯­è¨€ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼‰
- å•è¡Œæ³¨é‡Š vs å¤šè¡Œæ³¨é‡Šçš„ä½¿ç”¨ä¹ æƒ¯
- JSDoc æˆ– TSDoc æ ¼å¼
- ç¼©è¿›å’Œç©ºæ ¼è§„èŒƒ

**âœ… æ­£ç¡®çš„åšæ³•ï¼š**

å¦‚æœæ–‡ä»¶ä¸­å·²æœ‰ä¸­æ–‡æ³¨é‡Šé£æ ¼ï¼š
```typescript
// ç°æœ‰æ³¨é‡Šï¼šè·å–ç”¨æˆ·ä¿¡æ¯
function getUserInfo() { }

// æ–°å¢æ³¨é‡Šï¼šæ›´æ–°ç”¨æˆ·çŠ¶æ€ï¼ˆä¿æŒä¸­æ–‡é£æ ¼ï¼‰
function updateUserStatus() { }
```

å¦‚æœæ–‡ä»¶ä¸­å·²æœ‰è‹±æ–‡æ³¨é‡Šé£æ ¼ï¼š
```typescript
// Existing comment: Get user information
function getUserInfo() { }

// New comment: Update user status (keep English style)
function updateUserStatus() { }
```

å¦‚æœæ–‡ä»¶ä¸­å·²æœ‰ JSDoc é£æ ¼ï¼š
```typescript
/**
 * ç°æœ‰æ³¨é‡Šï¼šè·å–ç”¨æˆ·ä¿¡æ¯
 * @param {string} userId - ç”¨æˆ·ID
 */
function getUserInfo(userId: string) { }

/**
 * æ–°å¢æ³¨é‡Šï¼šæ›´æ–°ç”¨æˆ·çŠ¶æ€ï¼ˆä¿æŒç›¸åŒçš„ JSDoc æ ¼å¼ï¼‰
 * @param {string} userId - ç”¨æˆ·ID
 * @param {string} status - çŠ¶æ€
 */
function updateUserStatus(userId: string, status: string) { }
```

**æ³¨æ„äº‹é¡¹ï¼š**
- ä¸è¦åœ¨åŒä¸€æ–‡ä»¶ä¸­æ··ç”¨ä¸åŒçš„æ³¨é‡Šé£æ ¼
- ä¸è¦åœ¨ä¸­æ–‡æ³¨é‡Šé£æ ¼çš„æ–‡ä»¶ä¸­æ·»åŠ è‹±æ–‡æ³¨é‡Šï¼ˆåä¹‹äº¦ç„¶ï¼‰
- ä¿æŒæ³¨é‡Šçš„è¯¦ç»†ç¨‹åº¦ä¸ç°æœ‰æ³¨é‡Šä¸€è‡´
- åœ¨ä¿®å¤é—®é¢˜æˆ–æ·»åŠ æ³¨é‡Šæ—¶ï¼Œä¸è¦ä½¿ç”¨ä»»ä½•å›¾æ ‡ç¬¦å·ï¼ˆå¦‚å‹¾é€‰ã€å‰å·ç­‰è¡¨æƒ…ç¬¦å·ï¼‰ï¼Œä¿æŒæ³¨é‡Šå†…å®¹çº¯æ–‡æœ¬åŒ–

### 6. ä»£ç ç»„ç»‡è§„èŒƒ
**åœ¨å·²æœ‰ä»£ç ä¸­æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ä»£ç ç±»å‹å½’ç±»ï¼Œä¿æŒä»£ç ç»“æ„æ¸…æ™°æœ‰åºã€‚**

#### 6.1 å¯¹è±¡å±æ€§æ’åºè§„åˆ™
**åœ¨å·²æœ‰å¯¹è±¡ä¸­æ·»åŠ æ–°å±æ€§æ—¶ï¼Œå¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼ˆa-zï¼‰æ’å…¥åˆ°åˆé€‚ä½ç½®ã€‚**

**é€‚ç”¨èŒƒå›´ï¼šæ‰€æœ‰ä½¿ç”¨ `{}` åŒ…è£¹çš„å¯¹è±¡ç»“æ„ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š**
- TypeScript interface å®šä¹‰
- TypeScript type å®šä¹‰
- setup å‡½æ•°çš„ return {} å¯¹è±¡
- expose({}) æš´éœ²çš„å¯¹è±¡
- props å®šä¹‰å¯¹è±¡
- æ™®é€šçš„å¯¹è±¡å­—é¢é‡

**âœ… æ­£ç¡®çš„åšæ³• - Interfaceï¼š**

ä¸º `column` interface æ·»åŠ æ–°å±æ€§ `copy`ï¼ˆc å¼€å¤´ï¼‰ï¼Œåº”è¯¥æ’å…¥åˆ° `clickable` å’Œ `ellipsisTooltip` ä¹‹é—´ï¼š

```typescript
interface Column {
  align?: string;
  class?: string;
  clickable?: boolean;    // c å¼€å¤´
  copy?: boolean;         // æ–°å¢ï¼šc å¼€å¤´ï¼Œæ”¾åœ¨ clickable å’Œ ellipsisTooltip ä¹‹é—´
  ellipsisTooltip?: boolean;  // e å¼€å¤´
  field?: string;
  format?: Function;
  label?: string;
  maxWidth?: number;
  name: string;
  onClick?: Function;
  pinLeft?: boolean;
  pinRight?: boolean;
  style?: string;
  width?: number;
  wrapCount?: number;
}
```

**âœ… æ­£ç¡®çš„åšæ³• - return {}ï¼š**

åœ¨ return å¯¹è±¡ä¸­æ·»åŠ æ–°å±æ€§ `copyToClipboard`ï¼ˆc å¼€å¤´ï¼‰ï¼Œåº”è¯¥æ’å…¥åˆ° `columns` å’Œ `formatValue` ä¹‹é—´ï¼š

```typescript
return {
  // a å¼€å¤´
  activeRow,
  // c å¼€å¤´
  columns,
  copyToClipboard,  // æ–°å¢ï¼šc å¼€å¤´ï¼ŒæŒ‰å­—æ¯é¡ºåºæ”¾åœ¨è¿™é‡Œ
  // f å¼€å¤´
  formatValue,
  // h å¼€å¤´
  handleClick,
  handleDelete,
  // l å¼€å¤´
  loading,
  // t å¼€å¤´
  tableRef,
};
```

**âœ… æ­£ç¡®çš„åšæ³• - expose()ï¼š**

åœ¨ expose å¯¹è±¡ä¸­æ·»åŠ æ–°æ–¹æ³• `clearSelection`ï¼ˆc å¼€å¤´ï¼‰ï¼Œåº”è¯¥æ’å…¥åˆ° `blur` å’Œ `focus` ä¹‹é—´ï¼š

```typescript
expose({
  blur,
  clearSelection,  // æ–°å¢ï¼šc å¼€å¤´ï¼ŒæŒ‰å­—æ¯é¡ºåºæ”¾åœ¨è¿™é‡Œ
  focus,
  refresh,
  validate,
});
```

**âŒ é”™è¯¯çš„å†™æ³•ï¼š**

```typescript
// âŒ é”™è¯¯ï¼šç²—æš´åœ°æ”¾åœ¨æœ€åï¼Œæ²¡æœ‰æŒ‰å­—æ¯é¡ºåº
interface Column {
  name: string;
  label?: string;
  field?: string;
  // ... å…¶ä»–å±æ€§
  wrapCount?: number;
  copy?: boolean;  // âŒ é”™è¯¯ä½ç½®
}

// âŒ é”™è¯¯ï¼šæ²¡æœ‰æŒ‰å­—æ¯é¡ºåºæ’å…¥
return {
  tableRef,
  loading,
  columns,
  handleClick,
  handleDelete,
  formatValue,
  activeRow,
  copyToClipboard,  // âŒ é”™è¯¯ä½ç½®ï¼Œåº”è¯¥åœ¨ columns å’Œ formatValue ä¹‹é—´
};

// âŒ é”™è¯¯ï¼šæ²¡æœ‰æŒ‰å­—æ¯é¡ºåºæ’å…¥
expose({
  focus,
  blur,
  validate,
  refresh,
  clearSelection,  // âŒ é”™è¯¯ä½ç½®ï¼Œåº”è¯¥åœ¨ blur å’Œ focus ä¹‹é—´
});
```

**æ³¨æ„äº‹é¡¹ï¼š**
- å¿…é¡»ä¸¥æ ¼æŒ‰ç…§å±æ€§/æ–¹æ³•åçš„é¦–å­—æ¯é¡ºåºï¼ˆa-zï¼‰æ’åˆ—
- æ·»åŠ æ–°å±æ€§æ—¶ï¼Œæ‰¾åˆ°æ­£ç¡®çš„å­—æ¯é¡ºåºä½ç½®æ’å…¥ï¼Œè€Œä¸æ˜¯ç²—æš´åœ°æ”¾åœ¨æœ€å
- è¿™ä¸ªè§„åˆ™é€‚ç”¨äºæ‰€æœ‰ä½¿ç”¨ `{}` åŒ…è£¹çš„å¯¹è±¡ç»“æ„

#### 6.2 Vue setup å‡½æ•°å†…éƒ¨ä»£ç ç»„ç»‡è§„åˆ™
**åœ¨ `setup` å‡½æ•°å†…éƒ¨æ·»åŠ æ–°ä»£ç æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ä»£ç ç±»å‹å½’ç±»ï¼Œæ”¾åœ¨ç›¸åº”çš„åŒºåŸŸã€‚**

**ä»£ç ç»„ç»‡é¡ºåºï¼š**
1. **å“åº”å¼æ•°æ®å£°æ˜** - `ref`, `reactive`
2. **è®¡ç®—å±æ€§** - `computed`
3. **æ™®é€šå‡½æ•°/æ–¹æ³•** - å·¥å…·å‡½æ•°ã€äº‹ä»¶å¤„ç†å‡½æ•°ç­‰
4. **ä¾¦å¬å™¨** - `watch`, `watchEffect`
5. **ç”Ÿå‘½å‘¨æœŸé’©å­** - `onMounted`, `onUnmounted` ç­‰
6. **return è¯­å¥** - è¿”å›ç»™æ¨¡æ¿ä½¿ç”¨çš„å˜é‡å’Œæ–¹æ³•

**âœ… æ­£ç¡®çš„åšæ³•ï¼š**

```typescript
setup(props) {
  // 1. å“åº”å¼æ•°æ®å£°æ˜
  const tableRef = ref(null);
  const loading = ref(false);
  const selectedRows = ref([]);

  // 2. è®¡ç®—å±æ€§ï¼ˆæ‰€æœ‰ computed æ”¾åœ¨ä¸€èµ·ï¼‰
  const filteredRows = computed(() => {
    return props.rows.filter(row => row.visible);
  });
  
  const totalCount = computed(() => {
    return filteredRows.value.length;
  });
  
  // æ–°å¢ computedï¼Œåº”è¯¥æ”¾åœ¨è¿™é‡Œï¼Œè€Œä¸æ˜¯æ”¾åˆ° const å‡½æ•°åé¢
  const hasData = computed(() => {
    return totalCount.value > 0;
  });

  // 3. æ™®é€šå‡½æ•°/æ–¹æ³•
  const formatValue = (value: any) => {
    return value || '--';
  };
  
  const handleClick = (row: any) => {
    console.log('clicked', row);
  };
  
  // æ–°å¢å‡½æ•°ï¼Œæ”¾åœ¨å…¶ä»–å‡½æ•°é™„è¿‘
  const handleDelete = (row: any) => {
    console.log('delete', row);
  };

  // 4. ä¾¦å¬å™¨
  watch(() => props.rows, () => {
    console.log('rows changed');
  });

  // 5. ç”Ÿå‘½å‘¨æœŸé’©å­
  onMounted(() => {
    console.log('mounted');
  });

  // 6. return è¯­å¥
  return {
    tableRef,
    loading,
    selectedRows,
    filteredRows,
    totalCount,
    hasData,
    formatValue,
    handleClick,
    handleDelete,
  };
}
```

**âŒ é”™è¯¯çš„å†™æ³•ï¼š**

```typescript
setup(props) {
  // âŒ æ··ä¹±çš„ç»„ç»‡ç»“æ„
  const tableRef = ref(null);
  
  const formatValue = (value: any) => {
    return value || '--';
  };
  
  const filteredRows = computed(() => {
    return props.rows.filter(row => row.visible);
  });
  
  const loading = ref(false);
  
  // âŒ æ–°å¢çš„ computed æ”¾åœ¨äº† const å‡½æ•°åé¢ï¼Œåº”è¯¥æ”¾åœ¨å…¶ä»– computed é™„è¿‘
  const handleClick = (row: any) => {
    console.log('clicked', row);
  };
  
  const hasData = computed(() => {  // âŒ é”™è¯¯ä½ç½®
    return filteredRows.value.length > 0;
  });
  
  onMounted(() => {
    console.log('mounted');
  });
  
  return {
    // ...
  };
}
```

**æ³¨æ„äº‹é¡¹ï¼š**
- åŒç±»å‹çš„ä»£ç å¿…é¡»æ”¾åœ¨ä¸€èµ·ï¼Œä¸èƒ½æ··æ‚
- æ·»åŠ æ–°çš„ `computed` æ—¶ï¼Œå¿…é¡»æ”¾åœ¨æ‰€æœ‰ `computed` å£°æ˜åŒºåŸŸï¼Œä¸èƒ½æ”¾åœ¨æ™®é€šå‡½æ•°åé¢
- æ·»åŠ æ–°çš„å‡½æ•°æ—¶ï¼Œå¿…é¡»æ”¾åœ¨å‡½æ•°å£°æ˜åŒºåŸŸï¼Œä¸èƒ½æ”¾åœ¨ `watch` æˆ–ç”Ÿå‘½å‘¨æœŸé’©å­åé¢
- ä¿æŒæ¯ä¸ªåŒºåŸŸå†…éƒ¨ä¹Ÿæœ‰åˆç†çš„é¡ºåºï¼ˆæŒ‰åŠŸèƒ½æˆ–å­—æ¯é¡ºåºï¼‰

#### 6.3 æ³¨é‡Šåˆ†åŒºæ ‡è®°ï¼ˆå¯é€‰ï¼‰
**å¯¹äºå¤æ‚çš„ setup å‡½æ•°ï¼Œå»ºè®®ä½¿ç”¨æ³¨é‡Šæ ‡è®°æ¥æ˜ç¡®åˆ’åˆ†åŒºåŸŸã€‚**

```typescript
setup(props) {
  /* ========== å“åº”å¼æ•°æ® ========== */
  const tableRef = ref(null);
  const loading = ref(false);

  /* ========== è®¡ç®—å±æ€§ ========== */
  const filteredRows = computed(() => {
    return props.rows.filter(row => row.visible);
  });

  /* ========== æ–¹æ³• ========== */
  const handleClick = (row: any) => {
    console.log('clicked', row);
  };

  /* ========== ä¾¦å¬å™¨ ========== */
  watch(() => props.rows, () => {
    console.log('rows changed');
  });

  /* ========== ç”Ÿå‘½å‘¨æœŸ ========== */
  onMounted(() => {
    console.log('mounted');
  });

  /* ========== è¿”å› ========== */
  return {
    tableRef,
    loading,
    filteredRows,
    handleClick,
  };
}
```
